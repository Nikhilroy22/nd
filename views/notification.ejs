<%- include('header') %>

<h1>üì± Firebase Notification</h1>
<form id="notiForm">
  <input name="username" placeholder="Username" required>
  <input name="title" placeholder="Title" required>
  <textarea name="body" placeholder="Message" rows="4" required></textarea>
  <button type="submit">Send Notification</button>
</form>

<script>
    document.getElementById("notiForm").addEventListener("submit", async function(e) {
      e.preventDefault(); // ‚õîÔ∏è ‡¶™‡ßá‡¶ú ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá

      const form = e.target;
      const data = {
        username: form.username.value,
        title: form.title.value,
        body: form.body.value
      };

      try {
        const res = await fetch("/send", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const result = await res.json();
        alert(`‚úÖ Notification sent successfully! $(result)`);
        console.log(result);
        form.reset(); // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞
      } catch (err) {
        alert("‚ùå Error sending notification");
      }
    });
  </script>

<%- include('footer') %>